## 访问量
![Moe Counter](https://moe.tans.fun/@furry520-source-zan?theme=asoul&padding=7&scale=1)

# astrbot_plugin_furry_zan

一个可爱的 AstrBot 插件，用于在群聊中实现"点赞"功能。

## 功能特点

- 🎯 **自动点赞**：支持每日定时自动给自动用户点赞
- 👍 **赞我功能**：任何人都可以在群里发送"赞我"触发手动点赞
- 🚫 **黑名单管理**：支持黑名单功能，禁止特定用户使用插件
- ⏰ **智能时间设置**：可灵活设置每日自动点赞时间，自动处理日期冲突
- 🔄 **一键测试**：管理员可随时测试点赞功能，自动修复日期问题
- 👥 **好友自动**：只有好友才能自动自动点赞，保护隐私
- 📢 **群通知**：点赞结果和状态变化会推送到指定群组
- 📊 **状态监控**：实时查看插件运行状态和定时任务信息
- 🛡️ **安全增强**：黑名单系统防止滥用

## 使用方法

### 用户命令

1. **赞我功能**  
   在任意支持的群里发送 `赞我`，即可触发手动点赞。

2. **自动自动点赞**  
   发送命令：`自动点赞`  
   只有好友才能自动，自动后会在每天设定的时间自动点赞。

3. **取消自动**  
   发送命令：`取消自动点赞`

### 管理员命令

1. **黑名单管理**  
   - `添加黑名单 QQ号` - 添加用户到黑名单
   - `移除黑名单 QQ号` - 从黑名单移除用户
   - `查看黑名单` - 查看当前黑名单列表

2. **设置点赞时间**  
   发送命令：`设置点赞时间 HH:MM:SS`  
   例如：`设置点赞时间 08:30:00`  
   ⚡ 自动重置点赞日期，确保新时间立即生效

3. **立即测试点赞**  
   发送命令：`立即点赞`  
   ⚡ 自动处理日期冲突，强制立即执行点赞测试

4. **查看状态**  
   - `调试信息`：查看详细的插件运行状态和定时任务信息
   - `点赞状态`：查看插件的主要运行参数

## 黑名单功能说明

### 功能特性
- 🚫 **最高优先级**：黑名单检查优先级高于其他所有检查
- ⚡ **自动处理**：添加用户到黑名单时，如果该用户已自动，会自动取消其自动
- 🔄 **双向过滤**：黑名单用户既不能手动点赞，也不能自动自动
- 📋 **完整管理**：提供添加、移除、查看黑名单的完整命令

### 权限优先级
1. 🚫 **黑名单**（最高优先级）：黑名单用户无法使用任何点赞功能
2. 👥 **好友限制**：只有好友才能自动自动点赞
3. 🏷️ **群白名单**：如果启用白名单，非白名单群聊无法使用

## 配置参数

| 参数名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `enable_white_list_groups` | bool | `False` | 是否启用群白名单 |
| `white_list_groups` | list[str] | `[]` | 允许使用的群ID列表 |
| `subscribed_users` | list[str] | `[]` | 已自动的用户ID列表 |
| `blacklist_users` | list[str] | `[]` | **新增**：禁止使用此插件点赞的用户Q号，优先级最高 |
| `zanwo_date` | str | `"2025-01-01"` | 最后一次点赞的日期 |
| `auto_like_enabled` | bool | `True` | 是否启用自动点赞 |
| `likes_per_user` | int | `20` | 每次给用户点赞的次数 |
| `notify_groups` | list[str] | `[]` | 接收通知的群ID列表 |
| `notify_delay` | int | `1` | 发送群通知之间的延迟时间（秒） |

## 智能特性

- 🎯 **自动日期修复**：设置新时间或测试点赞时，自动重置点赞日期
- ⚡ **即时生效**：时间设置后立即重新安排定时任务
- 🔧 **错误恢复**：自动处理各种异常情况，确保服务稳定
- 📅 **跨天支持**：正确处理跨天的定时任务调度
- 🚫 **黑名单自动清理**：添加用户到黑名单时自动取消其自动
- 🛡️ **安全防护**：完整的黑名单系统防止插件滥用

## 安装方法

1. 将插件文件放在 AstrBot 的 `plugins` 目录下
2. 重启 AstrBot 加载插件
3. 在 AstrBot WebUI 中配置插件参数

## 注意事项

- 只有好友才能自动自动点赞功能
- 黑名单用户无法使用任何点赞功能，优先级最高
- 点赞次数受 QQ 平台限制，可能会触发风控
- 建议设置合理的点赞时间，避免影响用户体验
- 黑名单功能有助于管理滥用插件的用户

## 更新日志

### v1.3.0
1. **新增黑名单功能**：添加完整的黑名单管理系统
2. **安全增强**：黑名单用户禁止使用所有点赞功能
3. **自动清理**：添加用户到黑名单时自动取消其自动
4. **管理员命令**：提供完整的黑名单管理命令
5. **状态显示**：在状态信息中显示黑名单用户数量

### v1.2.0
1. **回复优化**：所有回复消息现在都使用随机话语，更加自然生动
2. **语言丰富**：每个回复类型都扩展到20+条不同的话语
3. **人机交互改善**：移除了机械化的系统提示，改用更亲切的口语化表达
4. **用户体验提升**：点赞、自动、取消等操作的回复更加多样化

### v1.1.0
1. 更改部分指令的触发方式